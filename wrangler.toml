name = "fastlaw"
compatibility_date = "2026-01-20"
main = "src/worker.ts"
assets = { binding = "ASSETS", run_worker_first = true }
compatibility_flags = ["nodejs_compat"]

[[d1_databases]]
binding = "DB"
database_name = "fastlaw"
database_id = "dc9efc6c-abb6-4790-9546-c3565022c186"
migrations_dir = "db/migrations"

[[r2_buckets]]
binding = "STORAGE"
bucket_name = "fastlaw-content"

[vars]
GEMINI_MODEL = "gemini-3-flash-preview"
PINECONE_INDEX_NAME = "cgs"
PINECONE_EMBED_ENDPOINT = "https://api.pinecone.io/embed"
PINECONE_EMBED_MODEL = "llama-text-embed-v2"
PINECONE_EMBED_DIMENSION = "2048"
PINECONE_API_VERSION = "2025-04"
READ_MAX_TOKENS = "600"
AGENT_MAX_STEPS = "6"
